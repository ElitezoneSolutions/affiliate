(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2820:function(e,t,i){Promise.resolve().then(i.bind(i,4873)),Promise.resolve().then(i.t.bind(i,4742,23)),Promise.resolve().then(i.t.bind(i,7960,23))},4873:function(e,t,i){"use strict";i.d(t,{Providers:function(){return u},a:function(){return r}});var s=i(7437),l=i(2265),n=i(2141);let a=(0,l.createContext)({user:null,session:null,loading:!0,signOut:async()=>{}});function u(e){var t;let{children:i}=e,[u,r]=(0,l.useState)(null),[o,c]=(0,l.useState)(null),[d,m]=(0,l.useState)(!0),f=(0,l.useCallback)(async e=>{try{let{data:s,error:l}=await n.O.from("users").select("*").eq("id",e).single();if(l){var t,i;if("42P01"===l.code||l.message.includes('relation "users" does not exist')){let i={id:e,email:(null==o?void 0:null===(t=o.user)||void 0===t?void 0:t.email)||"",first_name:"",last_name:"",profile_image:"",is_admin:!1,payout_method:void 0,payout_details:void 0,created_at:new Date().toISOString()};r(i),m(!1);return}try{let{data:t,error:s}=await n.O.from("users").insert({id:e,email:(null==o?void 0:null===(i=o.user)||void 0===i?void 0:i.email)||"",first_name:"",last_name:"",is_admin:!1}).select().single();if(s){if(s.message.includes("duplicate key")){let{data:t,error:i}=await n.O.from("users").select("*").eq("id",e).single();i?r(null):r(t)}else r(null)}else r(t)}catch(s){let{data:t,error:i}=await n.O.from("users").select("*").eq("id",e).single();i?r(null):r(t)}}else r(s)}catch(e){r(null)}finally{m(!1)}},[null==o?void 0:null===(t=o.user)||void 0===t?void 0:t.email]);(0,l.useEffect)(()=>{n.O.auth.getSession().then(e=>{let{data:{session:t}}=e;c(t),(null==t?void 0:t.user)?f(t.user.id):m(!1)});let{data:{subscription:e}}=n.O.auth.onAuthStateChange(async(e,t)=>{c(t),(null==t?void 0:t.user)?await f(t.user.id):(r(null),m(!1))});return()=>e.unsubscribe()},[f]),(0,l.useEffect)(()=>{if(!d&&!u&&!o){let e=setTimeout(()=>{m(!1)},100);return()=>clearTimeout(e)}},[d,u,o]);let _=async()=>{await n.O.auth.signOut()};return(0,s.jsx)(a.Provider,{value:{user:u,session:o,loading:d,signOut:_},children:i})}let r=()=>(0,l.useContext)(a)},2141:function(e,t,i){"use strict";i.d(t,{O:function(){return s}});let s=(0,i(6580).eI)("https://mqqitthsouwovhcwclmz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1xcWl0dGhzb3V3b3ZoY3djbG16Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM1NTQ5MTMsImV4cCI6MjA2OTEzMDkxM30.x3WZIgav0R2SClY0B4kiNtHm2MWZKMkNH5m50NjsLQQ")},7960:function(){},4742:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(e){e.O(0,[540,580,971,117,744],function(){return e(e.s=2820)}),_N_E=e.O()}]);