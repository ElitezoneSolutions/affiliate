(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[115],{2392:function(e,s,t){Promise.resolve().then(t.bind(t,8571))},8571:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return k}});var a=t(7437),r=t(2265),i=t(4873),n=t(9376),l=t(2141),d=t(2869),c=t(6070),x=t(5974),o=t(5613),u=t(5302),m=t(1723),h=t(5131),f=t(2252),g=t(2660),y=t(2369),j=t(9345),v=t(1047),p=t(8226),N=t(5252),b=t(8736),_=t(7648),w=t(872),Z=t(821);function k(){let{user:e}=(0,i.a)(),s=(0,n.useRouter)(),t=(0,n.useParams)().userId,[k,C]=(0,r.useState)(!0),[P,z]=(0,r.useState)(""),[L,S]=(0,r.useState)(null),[q,O]=(0,r.useState)({total_leads:0,approved_leads:0,pending_leads:0,rejected_leads:0,total_earnings:0,unpaid_earnings:0,paid_earnings:0,payout_requests:0}),[A,M]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(!e){s.replace("/login");return}if(!e.is_admin){s.replace("/dashboard");return}U()},[e,s,t]);let U=async()=>{try{var e;C(!0),z("");let{data:s,error:a}=await l.O.from("users").select("*").eq("id",t).single();if(a)throw a;S(s);let{data:r,error:i}=await l.O.from("leads").select("*").eq("affiliate_id",t).order("created_at",{ascending:!1});if(i)throw i;let n=(null==r?void 0:r.length)||0,d=(null==r?void 0:r.filter(e=>"approved"===e.status).length)||0,c=(null==r?void 0:r.filter(e=>"pending"===e.status).length)||0,x=(null==r?void 0:r.filter(e=>"rejected"===e.status).length)||0,o=(null==r?void 0:r.filter(e=>"approved"===e.status).reduce((e,s)=>e+(s.price||0),0))||0,u=(null==r?void 0:r.filter(e=>"approved"===e.status&&e.paid).reduce((e,s)=>e+(s.price||0),0))||0,m=null==r?void 0:null===(e=r[0])||void 0===e?void 0:e.created_at;O({total_leads:n,approved_leads:d,pending_leads:c,rejected_leads:x,total_earnings:o,unpaid_earnings:o-u,paid_earnings:u,payout_requests:0,last_lead_date:m}),M((null==r?void 0:r.slice(0,5))||[])}catch(e){z(e.message)}finally{C(!1)}},D=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=e=>{switch(e){case"approved":return(0,a.jsx)(u.Z,{className:"h-4 w-4 text-green-600"});case"pending":return(0,a.jsx)(m.Z,{className:"h-4 w-4 text-yellow-600"});case"rejected":return(0,a.jsx)(h.Z,{className:"h-4 w-4 text-red-600"});default:return(0,a.jsx)(m.Z,{className:"h-4 w-4 text-gray-600"})}},H=e=>{switch(e){case"approved":return(0,a.jsx)(x.C,{variant:"default",className:"bg-green-100 text-green-800",children:"Approved"});case"pending":return(0,a.jsx)(x.C,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"rejected":return(0,a.jsx)(x.C,{variant:"destructive",children:"Rejected"});default:return(0,a.jsx)(x.C,{variant:"outline",children:e})}};return k?(0,a.jsx)(Z.T,{}):L?(0,a.jsx)(w.l,{children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,a.jsx)(_.default,{href:"/admin/users",children:(0,a.jsxs)(d.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Back to Users"]})})}),(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[L.first_name," ",L.last_name]}),(0,a.jsx)("p",{className:"text-gray-600",children:"User Details & Performance"})]}),P&&(0,a.jsxs)(o.bZ,{variant:"destructive",className:"mb-6",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsx)(o.X,{children:P})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)(c.Zb,{className:"lg:col-span-1",children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5"}),"Profile Information"]})}),(0,a.jsxs)(c.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center",children:L.profile_image?(0,a.jsx)("img",{src:L.profile_image,alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}):(0,a.jsx)(y.Z,{className:"h-8 w-8 text-gray-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[L.first_name," ",L.last_name]}),(0,a.jsx)(x.C,{variant:L.is_admin?"default":"secondary",children:L.is_admin?"Admin":"Affiliate"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{children:L.email})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("span",{children:["Joined ",D(L.created_at)]})]}),L.payout_method&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("span",{children:["Payout: ",L.payout_method]})]})]})]})]}),(0,a.jsxs)(c.Zb,{className:"lg:col-span-2",children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5"}),"Performance Statistics"]})}),(0,a.jsxs)(c.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:q.total_leads}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Leads"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:q.approved_leads}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Approved"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:q.pending_leads}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Pending"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:q.rejected_leads}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Rejected"})]})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",q.total_earnings]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Earnings"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",q.paid_earnings]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Paid"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:["$",q.unpaid_earnings]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Unpaid"})]})]})]})]})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-5 w-5"}),"Recent Leads"]}),(0,a.jsx)(c.SZ,{children:"Latest leads submitted by this user"})]}),(0,a.jsx)(_.default,{href:"/admin/users/".concat(t,"/leads"),children:(0,a.jsx)(d.z,{variant:"outline",size:"sm",children:"View All Leads"})})]})}),(0,a.jsx)(c.aY,{children:0===A.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(b.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No leads submitted yet"})]}):(0,a.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[E(e.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.description}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:D(e.created_at)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:["$",e.price]}),H(e.status)]}),e.paid&&(0,a.jsx)(x.C,{variant:"default",className:"bg-green-100 text-green-800",children:"Paid"})]})]},e.id))})})]})]})})}):(0,a.jsx)(w.l,{children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(o.bZ,{variant:"destructive",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsx)(o.X,{children:"User not found"})]})})})})}},821:function(e,s,t){"use strict";t.d(s,{T:function(){return r}});var a=t(7437);function r(){return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}},5974:function(e,s,t){"use strict";t.d(s,{C:function(){return l}});var a=t(7437);t(2265);var r=t(535),i=t(4508);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:t}),s),...r})}},2252:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2660:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5302:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8226:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},5252:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5466:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},7692:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},9345:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},2369:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5131:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[580,697,648,13,971,117,744],function(){return e(e.s=2392)}),_N_E=e.O()}]);